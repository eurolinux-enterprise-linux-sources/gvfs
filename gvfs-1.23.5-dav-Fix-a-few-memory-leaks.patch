From 07fc7a65258bce9c3ad950f9adc0e6c66e2b0835 Mon Sep 17 00:00:00 2001
From: Ross Lagerwall <rosslagerwall@gmail.com>
Date: Sat, 7 Feb 2015 00:12:36 +0000
Subject: [PATCH] dav: Fix a few memory leaks

https://bugzilla.gnome.org/show_bug.cgi?id=744078
---
 daemon/gvfsbackenddav.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/daemon/gvfsbackenddav.c b/daemon/gvfsbackenddav.c
index 1cde3b2..88ea6e3 100644
--- a/daemon/gvfsbackenddav.c
+++ b/daemon/gvfsbackenddav.c
@@ -1387,10 +1387,12 @@ stat_location (GVfsBackend  *backend,
         	           http_error_code_from_status (status),
                 	   msg->reason_phrase);
 
+      g_object_unref (msg);
       return FALSE;
     }
 
   res = stat_location_finish (msg, target_type, num_children);
+  g_object_unref (msg);
 
   if (res == FALSE)
     g_set_error_literal (error, 
@@ -2832,5 +2836,4 @@ do_move (GVfsBackend *backend,
 
-  g_object_unref (msg);
-
 error:
+  g_object_unref (msg);
   g_clear_error (&error);
-- 
2.5.0

